# Symfony - Anotações gerais

- No Symfony, todo método deve retornar um response, sendo esse response um objeto

- As rotas são definidas usando attributes(#[Route('endpont')]), ou seja, basta utilizar o namespace use Symfony\Component\Routing\Attribute\Route;

- Symfony Flex é um plugin ou pacote do composer que atribui dois super poderes ao composer, aliases e recipes(receitas). Aliases pode ser entidido da seguinte forma, imagine que você deseja baixar o pacote symfony/http-client, ao invés de digitar tudo isso basta digitar composer require http-client, ou seja, o flex irá traduzir para o nome do pacote original. Para saber todas as receitas basta visitar o [symfony/recipes](https://github.com/symfony/recipes/blob/flex/main/RECIPES.md). Já recipes(receitas) funciona da seguinte forma, imagine que você adicionou um novo pacote, pode ser que esse pacote tenha uma recipe(receita), o que basicamente é um conjunto de arquivos que serão adicionados no nosso projeto, dessa forma, todos os arquivos que são inicializados nos diretórios bin, config e public são oriundos de recipes e pacotes que instalamos. No arquivo composer.json temos o pacote symfony/framework-bundle que é um core package do framework symfony. Se acessarmos o link [symfony/framework-bundle](https://github.com/symfony/recipes/tree/main/symfony/framework-bundle) veremos várias versões desse pacote, ao abrir o diretório de alguma dessas versões veremos alguns arquivos e diretórios como config, public e src, além dos arquivos manifest.json e post-install.txt. Ou seja, tudo isso vem dessa recipe.

- Para visualizar nossas recipes, basta utilizar o comando composer recipes que irá listar todas as recipes disponíveis. Para verificar os detalhes de uma recipe específica, basta digitar composer recipes nome_da_recipe, por exemplo, composer recipes symfony/framework-bundle, o resultado será os diretórios e arquivos que essa recipe gera.

- Para verificarmos se a padronização do nosso código está de acordo com os padrões estabelecidos para o desenvolvimento usando php, iremos instalar um package chamado cs-fixer-shim usando o comando composer require cs-fixer-shim. Ao rodar o comando, sera baixado um arquivo chamado .php-cs-fixer.dist.php que é o arquivo de configuração utilizado para ajustar o nosso código. Para executar o cs-fixer-shim basta digitar o comando ./vendor/bin/php-cs-fixer fix que irá ajustar a padronização do nosso código.

- Twig é um [template engine](https://twig.symfony.com/doc/3.x/index.html) semelhante ao blade do laravel que é utilizado para renderizar as views. Para instalar o twig basta digitar composer require twig. Note que twig é um alias para para symfony/twig-pack. Packages com terminação pack são pacotes que contém vários outros pacotes(dependências). Ao instalar o twig, temos que o arquivo bundles.php será modificado, ou seja, um novo bundle(plugin) séra instalado. Além disso, é adicionado um diretório chamado templates que é onde nossos templates/views serão criados. Algo importante, uma padronização é que o nome da controller seja compatível com o nome do diretório da view, por exemplo, se a controller se chama HomeController, o diretório da view deve ser home. Para renderizar a view, basta utilizar o método render do objeto $this->render('home/index.html.twig'). Para passar dados para a view, basta passar um array associativo como segundo parâmetro do método render, por exemplo, $this->render('main/homepage.html.twig', ['numberOfStarships' => $starshipCount]). Para acessar o valor passado para a view, basta utilizar a variável numberOfStarships, ou seja, {{ numberOfStarships }}.

- Twig possui 3 tipos de sintaxe, a primeira é a de interpolação, que é utilizada para exibir valores de variáveis, por exemplo, {{ name }}. A segunda é a de comentários, que é utilizada para comentar trechos de código, por exemplo, {# comentário #}. A terceira é a de tags, que é utilizada para controlar o fluxo do código, por exemplo, {% if name == 'Lucas' %} Olá <strong>Lucas</strong>  {% endif %}

- Twig cria um arquivo base.html.twig que é um arquivo base que contém estilos, javascript, conteudo etc... e é usado como base para nossas paginas. Para utilizar esse arquivo base, basta utilizar o método extends('base.html.twig') no arquivo filho, esse extends é uma forma de herdar o conteúdo do arquivo base. Para informar onde o conteúdo do arquivo filho será renderizado, basta utilizar o código {% block body %} {% endblock %} dentro do nosso arquivo base.html.twig que é onde o conteúdo do arquivo filho será renderizado. Para setar o que vai ser renderizado nesse bloco de código, basta utilizar o código {% block body %} {% endblock %} no arquivo filho. Ou seja, após o extends adicionar o trecho {% block body %} conteudo_aqui_dentro {% endblock %}. Dessa forma todo o conteúdo desejado será renderizado nesse bloco de código. Agora imagine que queremos altear o título do site, para isso basta adicionar o bloco {% block title %} Título do site {% endblock %} no arquivo filho, logo acima da declaração do bloco body anterior. Se quisermos herdar o título do arquivo base, basta adicionar o trecho {{ parent() }} dentro do bloco title do arquivo filho. Ou seja, o parent() é utilizado para herdar o conteúdo do bloco pai e concatenar com o conteúdo do bloco filho.

- Para debugar o código com o Symfony, basta instalar o pacote debug que instala outros pacotes como dependência. Para instalar o pacote debug, basta digitar composer require debug. O pacote debug instala também o pacote monolog que é um pacote de logs que é utilizado para debugar o código. Para visualizar os logs, basta acessar o diretório var/log/dev.log. Para visualizar os logs em tempo real, basta digitar tail -f var/log/dev.log. 

- O comando ./bin/console exibe todos os comandos disponíveis no console do Symfony. É possível adicionar os nossos próprios comandos, mas veremos mais sobre isso lá para frente. Ao executar um comando específico, como ./bin/console debug:router, teremos informações sobre as rotas disponíveis no nosso projeto. Outro comando interessante é o ./bin/console debug:twig que exibe todas as informações e funcionalidades disponíveis no twig.